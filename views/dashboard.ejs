<%- include("./partials/header", { title: "Dashboard", user }) %>

<section class="dashboard">
  <div class="welcome">
    <h1>Welcome back, <%= user.name %> ðŸ‘‹</h1>
    <p class="subtitle">Hereâ€™s a quick overview of your links and activity.</p>
  </div>

  <!-- Analytics Section -->
  <div class="analytics">
    <div class="analytics-grid">
      <div class="analytics-card">
        <h3>Total URLs</h3>
        <p><%= urlsAnalytics.totalUrls %></p>
      </div>
      <div class="analytics-card">
        <h3>Total Clicks</h3>
        <p><%= urlsAnalytics.totalClicks %></p>
      </div>
      <div class="analytics-card">
        <h3>Weekly Clicks</h3>
        <p><%= urlsAnalytics.weeklyClicks %></p>
      </div>
      <div class="analytics-card">
        <h3>Daily Clicks</h3>
        <p><%= urlsAnalytics.dailyClicks %></p>
      </div>
    </div>
  </div>

  <!-- URL List Section -->
  <div class="urls">
    <h2>Your Links</h2>
    <% if(urls.length > 0){ %>
      <div class="url-grid">
        <% urls.forEach(function(url){ %>
          <div class="url-card">
            <p><span class="label">Short:</span> 
              <a href="<%= url.shortUrl %>" target="_blank"><%= url.shortUrl %></a>
            </p>
            <p><span class="label">Original:</span> 
              <a href="<%= url.url %>" target="_blank"><%= url.url %></a>
            </p>
            <p><span class="label">Clicks:</span> <%= url.clicks %></p>
            <p><span class="label">Created:</span> 
              <%= new Date(url.createdAt).toLocaleString() %>
            </p>
          </div>
        <% }) %>
      </div>
    <% } else { %>
      <p class="note">You havenâ€™t shortened any links yet.</p>
    <% } %>
  </div>
</section>

<%- include("./partials/footer") %>
